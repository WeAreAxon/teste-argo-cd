name: CD
on:
    push:
            branches: [main]
jobs:
    build:
        name: build
        runs-on: ubuntu-latest
        steps:
            -   name: checkout
                uses: actions/checkout@v2

            -   name: Build image and push to docker hub
                uses: docker/build-push-action@v1.1.0
                with:
                    username: josealceu
                    password: ${{secrets.DOCKER_PASSWORD }}
                    repository: josealceu/argocd
                    tags: ${{github.sha }}
                
